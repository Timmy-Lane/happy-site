const negotiations = [
  {
    scenario: "–ü–∞—Ä—Ç–Ω–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –±—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ 30%, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ö–∞–∫ –ø–æ–≤–µ–¥–µ—à—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã?",
    context: "üí∞ –ë—é–¥–∂–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã",
    options: [
      "–°–æ–≥–ª–∞—à–∞—é—Å—å, –Ω–æ –ø—Ä–æ—à—É –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏",
      "–ü—Ä–µ–¥–ª–∞–≥–∞—é –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å scope –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–¥ –Ω–æ–≤—ã–π –±—é–¥–∂–µ—Ç",
      "–û–±—ä—è—Å–Ω—è—é, –ø–æ—á–µ–º—É —Ç–µ–∫—É—â–∏–π –±—é–¥–∂–µ—Ç –æ–ø—Ç–∏–º–∞–ª–µ–Ω, –∏ –∏—â—É –∫–æ–º–ø—Ä–æ–º–∏—Å—Å",
      "–ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞–∑—ã–≤–∞—é—Å—å –æ–±—Å—É–∂–¥–∞—Ç—å —Å–Ω–∏–∂–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞"
    ],
    scores: [7, 10, 9, 3],
    feedback: [
      "–•–æ—Ä–æ—à–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –±—Ä–∞—Ç—å –Ω–∞ —Å–µ–±—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞",
      "–û—Ç–ª–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –¢—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –≥–∏–±–∫–æ—Å—Ç—å –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º",
      "–û—á–µ–Ω—å –¥–∏–ø–ª–æ–º–∞—Ç–∏—á–Ω–æ! –¢—ã —É–º–µ–µ—à—å –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é —Å —É–≤–∞–∂–µ–Ω–∏–µ–º",
      "–°–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–∫–æ. –í –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö –≤–∞–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å"
    ]
  },
  {
    scenario: "–í–æ –≤—Ä–µ–º—è –≤—Å—Ç—Ä–µ—á–∏ –≤—ã—è—Å–Ω—è–µ—Ç—Å—è, —á—Ç–æ —É –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞. –¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è?",
    context: "üîÑ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–∏–¥–µ–Ω–∏–π",
    options: [
      "–ü—Ä–µ—Ä—ã–≤–∞—é –≤—Å—Ç—Ä–µ—á—É –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–π –¥–µ–Ω—å",
      "–í—ã—è—Å–Ω—è—é –∫–æ—Ä–µ–Ω—å —Ä–∞–∑–ª–∏—á–∏–π –∏ –∏—â—É –æ–±—â–∏–µ —Ü–µ–ª–∏",
      "–ù–∞—Å—Ç–∞–∏–≤–∞—é –Ω–∞ —Å–≤–æ–µ–º –≤–∏–¥–µ–Ω–∏–∏ –∫–∞–∫ –±–æ–ª–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º",
      "–ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ"
    ],
    scores: [4, 10, 2, 8],
    feedback: [
      "–ò–Ω–æ–≥–¥–∞ –ø–∞—É–∑–∞ –ø–æ–ª–µ–∑–Ω–∞, –Ω–æ –ª—É—á—à–µ —Ä–µ—à–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –º–µ—Å—Ç–µ",
      "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –¢—ã –∏–¥–µ—à—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–±–ª–µ–º—ã",
      "–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–æ–∂–µ—Ç —Ä–∞–∑—Ä—É—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è",
      "–•–æ—Ä–æ—à–∞—è –∏–¥–µ—è, –Ω–æ –≤–∞–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–∏—è"
    ]
  },
  {
    scenario: "–ü–∞—Ä—Ç–Ω–µ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –≤–æ –≤—Ä–µ–º—è –≤–∞–∂–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è. –ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å?",
    context: "üì± –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–Ω–∏–º–∞–Ω–∏–µ–º",
    options: [
      "–î–µ–ª–∞—é –≤–∏–¥, —á—Ç–æ –Ω–µ –∑–∞–º–µ—á–∞—é, –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é",
      "–ü—Ä—è–º–æ –≥–æ–≤–æ—Ä—é –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é",
      "–ü—Ä–µ–¥–ª–∞–≥–∞—é –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤",
      "–°–ø—Ä–∞—à–∏–≤–∞—é, –º–æ–∂–µ—Ç –ª–∏ –æ–Ω —Ä–µ—à–∏—Ç—å —Å—Ä–æ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"
    ],
    scores: [3, 8, 9, 10],
    feedback: [
      "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –ø–æ–º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å –µ—ë",
      "–ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Ä–µ–∑–∫–∏–º",
      "–ú—É–¥—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ! –î–∞—ë—à—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è",
      "–û—Ç–ª–∏—á–Ω–æ! –ü—Ä–æ—è–≤–ª—è–µ—à—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –≥–∏–±–∫–æ—Å—Ç—å"
    ]
  },
  {
    scenario: "–ü–∞—Ä—Ç–Ω–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å–ª–æ–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –≤—ã–≥–æ–¥–Ω—ã —Ç–æ–ª—å–∫–æ –µ–º—É. –¢–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è?",
    context: "‚öñÔ∏è –ù–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ —É—Å–ª–æ–≤–∏—è",
    options: [
      "–£–∫–∞–∑—ã–≤–∞—é –Ω–∞ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –±–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è",
      "–°–æ–≥–ª–∞—à–∞—é—Å—å, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ä—Ç–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è",
      "–ü—Ä–µ–¥–ª–∞–≥–∞—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é —Å—Ö–µ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è",
      "–ó–∞–¥–∞—é –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –µ–≥–æ –º–æ—Ç–∏–≤–∞—Ü–∏—é"
    ],
    scores: [9, 2, 8, 10],
    feedback: [
      "–ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å—Ç–∞–∏–≤–∞–µ—à—å –∏–Ω—Ç–µ—Ä–µ—Å—ã! –ü—Ä—è–º–æ –∏ —á–µ—Å—Ç–Ω–æ",
      "–¢–∞–∫–∏–µ —É—Å—Ç—É–ø–∫–∏ –º–æ–≥—É—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—É –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ",
      "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –ò—â–µ—à—å win-win —Ä–µ—à–µ–Ω–∏—è",
      "–ú–∞—Å—Ç–µ—Ä—Å–∫–∏! –ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–æ—Ç–∏–≤–æ–≤ - –∫–ª—é—á –∫ —É—Å–ø–µ—à–Ω—ã–º –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º"
    ]
  }
];

let currentScenario = 0;
let totalScore = 0;
let answers = [];

function startNegotiation() {
  document.getElementById("welcomeScreen").style.display = "none";
  document.getElementById("negotiationScreen").style.display = "block";
  showScenario();
}

function showScenario() {
  const scenario = negotiations[currentScenario];
  const container = document.getElementById("scenarioContainer");
  
  container.innerHTML = `
    <div class="scenario">
      <div class="context-badge">${scenario.context}</div>
      <h3 class="scenario-text">${scenario.scenario}</h3>
      <div class="options" id="options">
        ${scenario.options.map((option, index) => 
          `<div class="option" onclick="selectOption(${index})" data-index="${index}">
            ${option}
          </div>`
        ).join('')}
      </div>
    </div>
  `;
  
  document.getElementById("actionButtons").innerHTML = `
    <button class="next-btn" id="nextBtn" onclick="nextScenario()">
      ${currentScenario < negotiations.length - 1 ? '–°–ª–µ–¥—É—é—â–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π' : '–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã'}
    </button>
  `;
  
  updateProgress();
}

function selectOption(index) {
  const options = document.querySelectorAll(".option");
  options.forEach(opt => opt.classList.remove("selected"));
  options[index].classList.add("selected");
  
  answers[currentScenario] = index;
  document.getElementById("nextBtn").classList.add("active");
  
  // Show feedback
  const scenario = negotiations[currentScenario];
  const feedback = scenario.feedback[index];
  
  setTimeout(() => {
    const feedbackDiv = document.createElement("div");
    feedbackDiv.className = "feedback";
    feedbackDiv.innerHTML = `<strong>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:</strong> ${feedback}`;
    document.getElementById("scenarioContainer").appendChild(feedbackDiv);
  }, 500);
}

function nextScenario() {
  if (answers[currentScenario] === undefined) return;
  
  totalScore += negotiations[currentScenario].scores[answers[currentScenario]];
  currentScenario++;
  
  if (currentScenario < negotiations.length) {
    showScenario();
    document.getElementById("nextBtn").classList.remove("active");
  } else {
    showResults();
  }
}

function updateProgress() {
  const progress = ((currentScenario + 1) / negotiations.length) * 100;
  document.getElementById("progressBar").style.width = progress + "%";
}

function showResults() {
  document.getElementById("negotiationScreen").style.display = "none";
  document.getElementById("resultsScreen").style.display = "block";
  
  const maxScore = negotiations.reduce((sum, n) => sum + Math.max(...n.scores), 0);
  const percentage = Math.round((totalScore / maxScore) * 100);
  
  document.getElementById("finalScore").textContent = percentage + "%";
  
  let title, comment, achievement;
  
  if (percentage >= 90) {
    title = "Master Negotiator";
    comment = "–ù–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –¥–∏–ø–ª–æ–º–∞—Ç–∏–∏! üèÜ";
    achievement = "üéñÔ∏è –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: '–î–∏–ø–ª–æ–º–∞—Ç –≥–æ–¥–∞'<br>–¢–≤–æ–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ!";
  } else if (percentage >= 75) {
    title = "Senior Diplomat";
    comment = "–û—Ç–ª–∏—á–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–∞–ª–∞–Ω—Å–∞! ü§ù";
    achievement = "üåü –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: '–ú–∞—Å—Ç–µ—Ä –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤'<br>–¢—ã —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ—à–µ–Ω–∏—è, –≤—ã–≥–æ–¥–Ω—ã–µ –≤—Å–µ–º —Å—Ç–æ—Ä–æ–Ω–∞–º.";
  } else if (percentage >= 60) {
    title = "Negotiation Specialist";
    comment = "–•–æ—Ä–æ—à–∏–µ –Ω–∞–≤—ã–∫–∏ –æ–±—â–µ–Ω–∏—è! üí¨";
    achievement = "üìà –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: '–í–æ—Å—Ö–æ–¥—è—â–∞—è –∑–≤–µ–∑–¥–∞'<br>–¢–≤–æ–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è.";
  } else {
    title = "Future Diplomat";
    comment = "–ï—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —Ä–æ—Å—Ç–∞! üå±";
    achievement = "üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: '–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏'<br>–ö–∞–∂–¥—ã–π –≤–µ–ª–∏–∫–∏–π –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—â–∏–∫ –Ω–∞—á–∏–Ω–∞–ª —Å –æ—Å–Ω–æ–≤.";
  }
  
  document.getElementById("cardTitle").textContent = title;
  document.getElementById("scoreComment").textContent = comment;
  document.getElementById("achievement").innerHTML = achievement;
}